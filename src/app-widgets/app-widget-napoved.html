<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-card/paper-card.html">
<link rel="import" href="../../bower_components/iron-icon/iron-icon.html">
<link rel="import" href="../../bower_components/polymerfire/firebase-document.html">

<dom-module id="app-widget-napoved">

  <style include="pages-shared-styles">
     :host {
      display: block;
      box-sizing: border-box;
    }

    paper-card.dark {
      color: #f5f5f5;
      --paper-card-header-color: #f5f5f5;
    }

    paper-card {
      margin: 10px;
      width: calc(100% - 20px);
    }

    .text-center {
      text-align: center;
    }

    .vreme_zdaj1 {
      display: block;
      height: 128px;
    }

    .vreme_zdaj2 {
      display: block;
      margin-top: -128px;
    }

    .napoved {
      padding: 16px 16px 16px 16px;
      font-size: 16px;
      font-weight: 400;
      color: #000;
      text-transform: capitalize;
    }
  </style>

  <template>

    <firebase-document id="napoved" app-name="bazdara" path="/napoved" data="{{napoved}}"></firebase-document>

      <div class="row">

      <template is="dom-repeat" items="[[_limitForecast(napoved.napovedi, napoved)]]">

        <div class="col-sm-6 col-md-3 col-xl-3">
          <paper-card elevation="2" style="background-color:#ffffff">
            <div class="napoved">
              [[item.dan]]
            </div>

            <iron-icon icon$="[[item.icona_new]]:0" class="vreme_zdaj1"></iron-icon>
            <iron-icon icon$="[[item.icona_pojav_new]]:0" class="vreme_zdaj2"></iron-icon>

          </paper-card>
        </div>

      </template>

  </div>

  </template>

</dom-module>

<script>
  Polymer({

    is: 'app-widget-napoved',

    properties: {
      napoved: {
        type: Object,
        notify: true
      }
    },

    _limitForecast: function(forecast, item) {

      var today = new Date().getHours();
      if (today >= 12 && today <= 24) {
        forecast = forecast.slice(1, 5);
      } else if (today >= 00 && today <= 05) {
        forecast = forecast.slice(2, 6);
      } else {
        forecast = forecast.slice(0, 4);
      }
      return forecast;
    },

  });
</script>
